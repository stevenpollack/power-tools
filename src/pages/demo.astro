---
import Layout from '../layouts/ReviewLayout.astro';
import { FloatingCardWall } from '../components/FloatingCardWall';
import { CardDetails } from '../components/CardDetails';
import { mockReviews, getRandomReviews } from '../data/mockReviews';

// Generate a diverse set of reviews for demo
const demoReviews = [
  ...mockReviews,
  // Duplicate and modify some reviews for more content
  ...mockReviews.slice(0, 3).map((review, index) => ({
    ...review,
    id: `${review.id}-variant-${index + 1}`,
    shareCount: Math.floor(Math.random() * 50),
    featured: Math.random() > 0.7,
    readingTime: Math.floor(Math.random() * 5) + 1,
  })),
  // Add more variety with slight modifications
  ...mockReviews.slice(0, 15).map((review, index) => ({
    ...review,
    id: `${review.id}-extra-${index + 1}`,
    shareCount: Math.floor(Math.random() * 30),
    featured: false,
    excerpt: review.excerpt.substring(0, 120) + "...",
    readingTime: Math.floor(Math.random() * 4) + 2,
  }))
];

// Ensure we have exactly 24 reviews for demo
const finalDemoReviews = demoReviews.slice(0, 24);
---

<Layout title="Floating Wall Demo - Power Tools Reviews">
  <main class="demo-page">
    <!-- Demo Header -->
    <header class="demo-header">
      <div class="max-w-7xl mx-auto px-4 py-8">
        <h1 class="text-4xl font-bold text-center mb-4 text-gray-900">
          Floating Wall Demo
        </h1>
        <p class="text-xl text-center text-gray-600 mb-6 max-w-3xl mx-auto">
          Experience the interactive floating card wall with 24 literary reviews of power tools. 
          Hover for details, click to expand, and filter by mood, author, or category.
        </p>
        
        <!-- Demo Stats -->
        <div class="flex justify-center gap-8 text-sm text-gray-500">
          <div class="text-center">
            <div class="text-2xl font-bold text-blue-600">{finalDemoReviews.length}</div>
            <div>Reviews</div>
          </div>
          <div class="text-center">
            <div class="text-2xl font-bold text-green-600">{[...new Set(finalDemoReviews.map(r => r.authorName))].length}</div>
            <div>Authors</div>
          </div>
          <div class="text-center">
            <div class="text-2xl font-bold text-purple-600">{[...new Set(finalDemoReviews.map(r => r.brand))].length}</div>
            <div>Brands</div>
          </div>
          <div class="text-center">
            <div class="text-2xl font-bold text-orange-600">{finalDemoReviews.filter(r => r.featured).length}</div>
            <div>Featured</div>
          </div>
        </div>
      </div>
    </header>

    <!-- Floating Card Wall -->
    <FloatingCardWall 
      reviews={finalDemoReviews} 
      client:load
    />

    <!-- Instructions for mobile -->
    <div class="mobile-instructions md:hidden fixed bottom-4 left-4 right-4 bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800">
      <div class="font-medium mb-1">Mobile Controls:</div>
      <div>• Tap cards to expand • Pinch to zoom • Swipe to navigate • Use filters above</div>
    </div>

    <!-- Desktop instructions -->
    <div class="desktop-instructions hidden md:block fixed bottom-4 right-4 bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-600 max-w-xs">
      <div class="font-medium mb-2">Desktop Controls:</div>
      <ul class="space-y-1">
        <li>• <strong>Hover</strong> - Reveal review text</li>
        <li>• <strong>Click</strong> - Expand full review</li>
        <li>• <strong>Filter</strong> - Use badges above</li>
        <li>• <strong>Search</strong> - Type in search box</li>
      </ul>
    </div>
  </main>
</Layout>

<style>
  .demo-page {
    min-height: 100vh;
    background: linear-gradient(
      135deg,
      #f0f9ff 0%,
      #ffffff 25%,
      #fdf4ff 50%,
      #ffffff 75%,
      #f0f9ff 100%
    );
  }

  .demo-header {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .mobile-instructions {
    animation: slideUp 0.3s ease-out;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }

  .desktop-instructions {
    animation: slideLeft 0.3s ease-out;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slideLeft {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  /* Ensure proper spacing on mobile */
  @media (max-width: 768px) {
    .demo-page {
      padding-bottom: 100px; /* Space for mobile instructions */
    }
  }
</style> 